/*! mp-progress.js v1.1.4 https://www.npmjs.com/package/mp-progress */
var t,e;t=window,e=function(){return o={},r.m=n=[function(t,e,n){"use strict";function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function r(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var c=function(){function p(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var e=t.canvasId,n=t.canvasSize,o=void 0===n?{width:0,height:0}:n,r=t.percent,i=void 0===r?100:r,a=t.barStyle,c=void 0===a?{}:a,s=t.needDot,l=void 0!==s&&s,h=t.dotStyle,f=void 0===h?[]:h,u=t.target,d=void 0===u?null:u;if(!e)throw"[初始化失败]: 缺少canvasId";this._percent=i<50?50:100<i?100:i,this._options={canvasId:e,needDot:l,dotStyle:f,canvasSize:o,barStyle:c,target:d}}var t,e,n;return t=p,(e=[{key:"draw",value:function(t){var r=this,e=wx.getSystemInfoSync().SDKVersion;this.compareVersion(e,"2.7.0")<0?console.error("请在2.7.0以上的SDK中使用，当前SDK版本：".concat(e)):void 0!==t?(t<0&&(t=0,console.warn("[参数percentagegit<0]: 已自动调整为0")),100<t&&(t=100,console.warn("[参数percentage>100]: 已自动调整为100")),this._options.percentage=+t||0,this._context?this.drawFn():wx.createSelectorQuery().in(this._options.target).select("#".concat(this._options.canvasId)).fields({node:!0,size:!0}).exec(function(t){var e=t[0].node,n=e.getContext("2d"),o=wx.getSystemInfoSync().pixelRatio;e.width=t[0].width*o,e.height=t[0].height*o,n.scale(o,o),r._context=n,r.drawFn()})):console.warn("[绘图过程出现错误]: 调用draw方法必须传入百分比参数")}},{key:"drawFn",value:function(){var y=this;try{var t=function(){var p=y._options.barStyle;if(!(0<p.length))return console.warn("参数barStyle不符合要求，请检查"),{v:void 0};var t=function(){for(var t=0,e=0;e<p.length;e++){var n=p[e].width;t<n&&(t=n)}var o=0,r=Math.cos(2*Math.PI/360*((100-y._percent)/2/100*360)),o=100===y._percent?((Math.min(y._options.canvasSize.width,y._options.canvasSize.height)-2*t)/2).toFixed(2):(Math.min(y._options.canvasSize.width/2,(y._options.canvasSize.height-2*t)/(1+r))-t).toFixed(2),i=Math.round(y._options.canvasSize.width/2),a=0,a=100===y._percent?Math.round(y._options.canvasSize.height/2):Math.round(y._options.canvasSize.height/(1+r));if(y._options.needDot){if(!(0<y._options.dotStyle.length))return console.warn("参数dotStyle不完整，请检查"),{v:{v:void 0}};var c,s=y._options.dotStyle[0].r;t<s&&(o-=c=s-t+(y._options.dotStyle[0].shadow?s/2:0),100!==y._percent&&(a-=c))}y._context.translate(y.convertLength(i),y.convertLength(a));var l=100===y._percent?-90:360*((100-y._percent+(y._percent-50)/2)/100).toFixed(2);y._context.rotate(l*Math.PI/180),y._r=y.convertLength(o);for(var h,f=2*(y._options.percentage/100).toFixed(2)*Math.PI,u=0,d=p.length;u<p.length;u++)h=d,function(t){var e=p[t];y._context.beginPath(),y._context.arc(0,0,y._r,0,(t===h-1?f:2*Math.PI)*y._percent/100),y._context.lineWidth=y.convertLength(e.width),y._context.strokeStyle=y.generateBarFillStyle(e.fillStyle);var n=e.lineCap;n&&(y._context.lineCap=n),y._context.stroke()}(u)}();if("object"===i(t))return t.v;y._options.needDot&&y.drawBarCoordinateDot()}();if("object"===i(t))return t.v}catch(t){console.warn("[绘图过程出现错误]: ",t)}}},{key:"compareVersion",value:function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var o=0;o<n;o++){var r=parseInt(t[o]),i=parseInt(e[o]);if(i<r)return 1;if(r<i)return-1}return 0}},{key:"generateBarFillStyle",value:function(t){if("string"==typeof t)return t;for(var e=this._context.createLinearGradient(0,0,100,90),n=0;n<t.length;n++){var o=t[n];e.addColorStop(o.position,o.color)}return e}},{key:"convertLength",value:function(t){return+Math.round(wx.getSystemInfoSync().windowWidth*t/750)}},{key:"drawCircleWithFillStyle",value:function(t){this._context.beginPath(),this._context.arc(t.x,t.y,this.convertLength(t.r),0,2*Math.PI),this._context.fillStyle=t.fillStyle||"#ffffff",t.shadow&&(this._context.shadowOffsetX=0,this._context.shadowOffsetY=0,this._context.shadowColor=t.shadow,this._context.shadowBlur=this.convertLength(t.r/2)),this._context.fill()}},{key:"drawBarCoordinateDot",value:function(){var t=360*(this._options.percentage/100*this._percent/100).toFixed(2),e="",n=0,o=0,o=t<=90?(e=2*Math.PI/360*t,n=(Math.cos(e)*this._r).toFixed(2),(Math.sin(e)*this._r).toFixed(2)):90<t&&t<=180?(e=2*Math.PI/360*(180-t),n=-(Math.cos(e)*this._r).toFixed(2),(Math.sin(e)*this._r).toFixed(2)):(n=180<t&&t<=270?(e=2*Math.PI/360*(t-180),-(Math.cos(e)*this._r).toFixed(2)):(e=2*Math.PI/360*(360-t),(Math.cos(e)*this._r).toFixed(2)),-(Math.sin(e)*this._r).toFixed(2));0<this._options.dotStyle.length?this.drawCircleWithFillStyle(r({x:n,y:o},this._options.dotStyle[0])):console.warn("参数dotStyle不完整，请检查"),1<this._options.dotStyle.length&&this.drawCircleWithFillStyle(r({x:n,y:o},this._options.dotStyle[1]))}}])&&a(t.prototype,e),n&&a(t,n),p}();e.default=c}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0).default;function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MpProgress=e():t.MpProgress=e();