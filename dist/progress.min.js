/*! mp-progress.js v1.2.1 https://www.npmjs.com/package/mp-progress */
var t,e;t=window,e=function(){return o={},r.m=n=[function(t,e,n){"use strict";function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function r(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var a=function(){function f(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var e=t.canvasId,n=t.canvasSize,o=void 0===n?{width:0,height:0}:n,r=t.percent,i=void 0===r?100:r,a=t.barStyle,s=void 0===a?{}:a,h=t.needDot,c=void 0!==h&&h,l=t.dotStyle,d=void 0===l?[]:l,p=t.target,u=void 0===p?null:p;if(!e)throw"[初始化失败]: 缺少canvasId";this._percent=i<50?50:100<i?100:i,this._options={canvasId:e,needDot:c,dotStyle:d,canvasSize:o,barStyle:s,target:u},this._barIndex=0}var t,e,n;return t=f,(e=[{key:"draw",value:function(t){var r=this,e=wx.getSystemInfoSync().SDKVersion;this.compareVersion(e,"2.7.0")<0?console.error("请在2.7.0以上的SDK中使用，当前SDK版本：".concat(e)):void 0!==t?(t<0&&(t=0,console.warn("[参数percentagegit<0]: 已自动调整为0")),100<t&&(t=100,console.warn("[参数percentage>100]: 已自动调整为100")),this._options.percentage=+t||0,this._context?this.drawFn():wx.createSelectorQuery().in(this._options.target).select("#".concat(this._options.canvasId)).fields({node:!0,size:!0}).exec(function(t){var e=t[0].node;r._requestAnimationFrame=e.requestAnimationFrame;var n=e.getContext("2d"),o=wx.getSystemInfoSync().pixelRatio;e.width=t[0].width*o,e.height=t[0].height*o,n.scale(o,o),r._context=n,r.drawFn()})):console.warn("[绘图过程出现错误]: 调用draw方法必须传入百分比参数")}},{key:"drawFn",value:function(){var t=this;try{var e=this._options.barStyle;if(0<e.length){for(var n=0,o=0;o<e.length;o++){var r=e[o].width;n<r&&(n=r)}var i=0,a=Math.cos(2*Math.PI/360*((100-this._percent)/2/100*360)),i=100===this._percent?((Math.min(this._options.canvasSize.width,this._options.canvasSize.height)-2*n)/2).toFixed(2):(Math.min(this._options.canvasSize.width/2,(this._options.canvasSize.height-2*n)/(1+a))-n).toFixed(2),s=Math.round(this._options.canvasSize.width/2),h=0,h=100===this._percent?Math.round(this._options.canvasSize.height/2):Math.round(this._options.canvasSize.height/(1+a));if(this._options.needDot){if(!(0<this._options.dotStyle.length))return void console.warn("参数dotStyle不完整，请检查");var c,l=this._options.dotStyle[0].r;n<l&&(i-=c=l-n+(this._options.dotStyle[0].shadow?l/2:0),100!==this._percent&&(h-=c))}this._context.translate(this.convertLength(s),this.convertLength(h));var d=100===this._percent?-90:360*((100-this._percent+(this._percent-50)/2)/100).toFixed(2);this._context.rotate(d*Math.PI/180),this._r=this.convertLength(i),this.deg=2*(this._options.percentage/100).toFixed(2)*Math.PI;for(var p=0;p<e.length;p++)t._barIndex=p,t.drawBar();this.hasAnimateBar?console.warn("animate和dotStyle不可同时使用"):this._options.needDot&&this.drawBarCoordinateDot()}else console.warn("参数barStyle不符合要求，请检查")}catch(t){console.warn("[绘图过程出现错误]: ",t)}}},{key:"drawBar",value:function(){var t=this._options.barStyle[this._barIndex],e=this._options.barStyle.length-1===this._barIndex,n=(e?this.deg:2*Math.PI)*this._percent/100,o=0,r=n;e&&t.animate&&(this.hasAnimateBar=!0,t.percent?t.percent+=2:t.percent=2,o=n*((t.percent-2)/100),r=n*(t.percent/100)),this._context.beginPath(),this._context.arc(0,0,this._r,o,r),this._context.lineWidth=this.convertLength(t.width),this._context.strokeStyle=this.generateBarFillStyle(t.fillStyle);var i=t.lineCap;i&&(this._context.lineCap=i),this._context.stroke(),e&&t.animate&&t.percent<100&&this._requestAnimationFrame(this.drawBar.bind(this))}},{key:"compareVersion",value:function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var o=0;o<n;o++){var r=parseInt(t[o]),i=parseInt(e[o]);if(i<r)return 1;if(r<i)return-1}return 0}},{key:"generateBarFillStyle",value:function(t){if("string"==typeof t)return t;for(var e=this._context.createLinearGradient(0,0,100,90),n=0;n<t.length;n++){var o=t[n];e.addColorStop(o.position,o.color)}return e}},{key:"convertLength",value:function(t){return+Math.round(wx.getSystemInfoSync().windowWidth*t/750)}},{key:"drawCircleWithFillStyle",value:function(t){this._context.beginPath(),this._context.arc(t.x,t.y,this.convertLength(t.r),0,2*Math.PI),this._context.fillStyle=t.fillStyle||"#ffffff",t.shadow&&(this._context.shadowOffsetX=0,this._context.shadowOffsetY=0,this._context.shadowColor=t.shadow,this._context.shadowBlur=this.convertLength(t.r/2)),this._context.fill()}},{key:"drawBarCoordinateDot",value:function(){var t=360*(this._options.percentage/100*this._percent/100).toFixed(2),e="",n=0,o=0,o=t<=90?(e=2*Math.PI/360*t,n=(Math.cos(e)*this._r).toFixed(2),(Math.sin(e)*this._r).toFixed(2)):90<t&&t<=180?(e=2*Math.PI/360*(180-t),n=-(Math.cos(e)*this._r).toFixed(2),(Math.sin(e)*this._r).toFixed(2)):(n=180<t&&t<=270?(e=2*Math.PI/360*(t-180),-(Math.cos(e)*this._r).toFixed(2)):(e=2*Math.PI/360*(360-t),(Math.cos(e)*this._r).toFixed(2)),-(Math.sin(e)*this._r).toFixed(2));0<this._options.dotStyle.length?this.drawCircleWithFillStyle(r({x:n,y:o},this._options.dotStyle[0])):console.warn("参数dotStyle不完整，请检查"),1<this._options.dotStyle.length&&this.drawCircleWithFillStyle(r({x:n,y:o},this._options.dotStyle[1]))}}])&&i(t.prototype,e),n&&i(t,n),f}();e.default=a}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0).default;function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MpProgress=e():t.MpProgress=e();